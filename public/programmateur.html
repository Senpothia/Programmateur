<!DOCTYPE html>
<html>

<head>

	<meta charset="UTF-8">

	<title>Programmateur bagdes</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>


	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
	<script src="../socket.io/socket.io.js"></script>

	<script src="../logic.js"></script>

	<style>
		body {
			background-color: #dde2f0;
		}
	</style>


</head>

<body>

	<container>

		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">

				<h1>PROGRAMMATION BADGES LIBRA</h1>
			</div>
		</div>



		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">

				<h3>Type de badge</h3>
				<div>
					<input class="form-check-input" type="radio" name="radio_typeBadge" value="00" unchecked> <label class="form-check-label" for="radio_typeBadge">Badge
						maitre</label>
					<input class="form-check-input" type="radio" name="radio_typeBadge" value="01" unchecked> <label class="form-check-label"
						for="radio_typeBadge">Resident</label>
					<input class="form-check-input" type="radio" name="radio_typeBadge" value="02" checked> <label class="form-check-label"
						for="radio_typeBadge">Prestataire</label>
					<input class="form-check-input" type="radio" name="radio_typeBadge" value="FF" unchecked> <label class="form-check-label"
						for="radio_typeBadge">Pass</label>
				</div>

			</div>

		</div>

		<div class="row d-flex justify-content-center align-items-center">
			<div class="col text-center">


				<h3>Numéro de centrale</h3>
				<input type="number" name="edit_controllerSerial" value="0000007" min="0" max="4294967295"
					id="id_controllerSerial" /> <!-- 305419896 decimal = 0x12345678 -->

				<label class="custom-file-label" for="inputGroupFile02">Code site:</label>
				<input type="number" name="edit_codesite" value="305419896" min="0" max="4294967295"
					id="id_edit_codesite" /> <!-- 305419896 decimal = 0x12345678 -->


				<label class="custom-file-label" for="inputGroupFile02">Num porteur</label>

				<input type="number" name="edit_userId" value="1234" min="0" max="65535" id="id_edit_userId" />
				<label class="custom-file-label" for="inputGroupFile02">Couleur:</label>
				<input type="number" name="edit_userColor" value="00" min="0" max="255" id="id_edit_userColor" />

				<label class="custom-file-label" for="inputGroupFile02">Indice perte:</label>
				<input type="text" name="edit_userLostcounter" value="00" id="id_edit_userLostcounter" />

			</div>
		</div>


		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">

				<h2>Masque numeros portes autorisées</h2>


				<div class="row">
					<div class="col">

						<table class="table table table-striped">

							<tbody>
								<tr>
									<th> <input type="checkbox" name="doormaskP0" checked> <label>P00</label> </th>
									<th> <input type="checkbox" name="doormaskP0" checked> <label>P01</label> </th>
									<th> <input type="checkbox" name="doormaskP0" unchecked> <label>P02</label> </th>
									<th> <input type="checkbox" name="doormaskP0" unchecked> <label>P03</label> </th>
									<th> <input type="checkbox" name="doormaskP0" unchecked> <label>P04</label> </th>
									<th> <input type="checkbox" name="doormaskP0" unchecked> <label>P05</label> </th>
									<th> <input type="checkbox" name="doormaskP0" unchecked> <label>P06</label> </th>
									<th> <input type="checkbox" name="doormaskP0" unchecked> <label>P07</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P08</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P09</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P0A</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P0B</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P0C</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P0D</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P0E</label> </th>
									<th> <input type="checkbox" name="doormaskP1" unchecked> <label>P0F</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P10</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P11</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P12</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P13</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P14</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P15</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P16</label> </th>
									<th> <input type="checkbox" name="doormaskP2" unchecked> <label>P17</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P18</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P19</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P1A</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P1B</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P1C</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P1D</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P1E</label> </th>
									<th> <input type="checkbox" name="doormaskP3" unchecked> <label>P1F</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P20</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P21</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P22</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P23</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P24</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P25</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P26</label> </th>
									<th> <input type="checkbox" name="doormaskP4" unchecked> <label>P27</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P28</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P29</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P2A</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P2B</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P2C</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P2D</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P2E</label> </th>
									<th> <input type="checkbox" name="doormaskP5" unchecked> <label>P2F</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P30</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P31</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P32</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P33</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P34</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P35</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P36</label> </th>
									<th> <input type="checkbox" name="doormaskP6" unchecked> <label>P37</label> </th>
								</tr>
								<tr>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P38</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P39</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P3A</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P3B</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P3C</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P3D</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P3E</label> </th>
									<th> <input type="checkbox" name="doormaskP7" unchecked> <label>P3F</label> </th>
								</tr>
							</tbody>
						</table>

					</div>
				</div>

			</div>
		</div>


		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">

				<h2 class="mb-3">Date début validité</h2>

				Jour<input type="number" name="edit_dateValidBeginDay" value="01" min="0" max="31"
					id="id_edit_dateValidBeginDay" maxlength="2" size="2" />
				Mois<input type="number" name="edit_dateValidBeginMonth" value="01" value="01" min="0" max="12"
					id="id_edit_dateValidBeginMonth" maxlength="2" size="2" />
				Annee<input type="number" name="edit_dateValidBeginYear" value="2021" value="1900" min="0" max="2100"
					id="id_edit_dateValidBeginYear" maxlength="4" size="4" />
				Hr: <input type="number" name="edit_heureValidBeginHr" value="00" min="0" max="23"
					id="id_edit_heureValidBeginHr" maxlength="2" size="2" />
				Min: <input type="number" name="edit_heureValidBeginMn" value="00" min="0" max="59"
					id="id_edit_heureValidBeginMn" maxlength="2" size="2" />
				<div></div>

				Date fin validité:
				Jour<input type="number" name="edit_dateValidEndDay" value="31" min="0" max="31"
					id="id_edit_dateValidEndDay" maxlength="2" size="2" />
				Mois<input type="number" name="edit_dateValidEndMonth" value="12" min="0" max="12"
					id="id_edit_dateValidEndMonth" maxlength="2" size="2" />
				Annee<input type="number" name="edit_dateValidEndYear" value="2021" min="1900" max="2100"
					id="id_edit_dateValidEndYear" maxlength="4" size="4" />
				<th> Hr: <input type="number" name="edit_heureValidEndHr" value="23" min="0" max="23"
						id="id_edit_heureValidEndHr" maxlength="2" size="2" /> </th>
				<th> Min: <input type="number" name="edit_heureValidEndMn" value="59" min="0" max="59"
						id="id_edit_heureValidEndMn" maxlength="2" size="2" /> </th>
				</br>


				<input type="checkbox" name="edit_joursFeriesValid" checked> <label>Jours Fériés</label>
				<input type="checkbox" name="edit_joursFeriesValid" checked> <label>Periode vacances</label>


			</div>
		</div>


		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">



				<table class="table table table-striped" width="50%" border="0" cellspacing="0" cellpadding="0">
					<tr>
						<th colspan="13" align="center">Horaire validite</th>
					</tr>
					<tr>
						<th colspan="1" align="center">Numero plage validite</th>
						<th colspan="2" align="center">Debut</th>
						<th colspan="2" align="center">Fin</th>
						<th colspan="8" align="center">Jour semaine</th>
					</tr>
					<tr>
						<th colspan="1" align="center">Plage 1</th>
						<th> Hr: <input type="number" name="edit_sched1_beginHr" value="07" min="0" max="23"
								id="id_edit_sched1_beginHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched1_beginMn" value="30" min="0" max="59"
								id="id_edit_sched1_beginMn" maxlength="2" size="2" /> </th>
						<th> Hr: <input type="number" name="edit_sched1_endHr" value="12" min="0" max="23"
								id="id_edit_sched1_endHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched1_endMn" value="00" min="0" max="59"
								id="id_edit_sched1_endMn" maxlength="2" size="2" /> </th>
						<th> <input type="checkbox" name="sched1Day" unchecked> <label>Dim</label> </th>
						<th> <input type="checkbox" name="sched1Day" checked> <label>Lun</label> </th>
						<th> <input type="checkbox" name="sched1Day" checked> <label>Mar</label> </th>
						<th> <input type="checkbox" name="sched1Day" checked> <label>Mer</label> </th>
						<th> <input type="checkbox" name="sched1Day" checked> <label>Jeu</label> </th>
						<th> <input type="checkbox" name="sched1Day" checked> <label>Ven</label> </th>
						<th> <input type="checkbox" name="sched1Day" unchecked> <label>Sam</label> </th>
						<th> <input type="checkbox" name="sched1Day" unchecked> <label>Jour Ferie</label> </th>
					</tr>
					<tr>
						<th colspan="1" align="center">Plage 2</th>
						<th> Hr: <input type="number" name="edit_sched2_beginHr" value="13" min="0" max="23"
								id="id_edit_sched2_beginHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched2_beginMn" value="30" min="0" max="59"
								id="id_edit_sched2_beginMn" maxlength="2" size="2" /> </th>
						<th> Hr: <input type="number" name="edit_sched2_endHr" value="19" min="0" max="23"
								id="id_edit_sched2_endHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched2_endMn" value="00" min="0" max="59"
								id="id_edit_sched2_endMn" maxlength="2" size="2" /> </th>
						<th> <input type="checkbox" name="sched2Day" unchecked> <label>Dim</label> </th>
						<th> <input type="checkbox" name="sched2Day" checked> <label>Lun</label> </th>
						<th> <input type="checkbox" name="sched2Day" checked> <label>Mar</label> </th>
						<th> <input type="checkbox" name="sched2Day" checked> <label>Mer</label> </th>
						<th> <input type="checkbox" name="sched2Day" checked> <label>Jeu</label> </th>
						<th> <input type="checkbox" name="sched2Day" checked> <label>Ven</label> </th>
						<th> <input type="checkbox" name="sched2Day" unchecked> <label>Sam</label> </th>
						<th> <input type="checkbox" name="sched2Day" unchecked> <label>Jour Ferie</label> </th>
					</tr>
					<tr>
						<th colspan="1" align="center">Plage 3</th>
						<th> Hr: <input type="number" name="edit_sched3_beginHr" value="08" min="0" max="23"
								id="id_edit_sched3_beginHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched3_beginMn" value="00" min="0" max="59"
								id="id_edit_sched3_beginMn" maxlength="2" size="2" /> </th>
						<th> Hr: <input type="number" name="edit_sched3_endHr" value="12" min="0" max="23"
								id="id_edit_sched3_endHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched3_endMn" value="00" min="0" max="59"
								id="id_edit_sched3_endMn" maxlength="2" size="2" /> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Dim</label> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Lun</label> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Mar</label> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Mer</label> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Jeu</label> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Ven</label> </th>
						<th> <input type="checkbox" name="sched3Day" checked> <label>Sam</label> </th>
						<th> <input type="checkbox" name="sched3Day" unchecked> <label>Jour Ferie</label> </th>
					</tr>
					<tr>
						<th colspan="1" align="center">Plage 4</th>
						<th> Hr: <input type="number" name="edit_sched4_beginHr" value="22" min="0" max="23"
								id="id_edit_sched4_beginHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched4_beginMn" value="00" min="0" max="59"
								id="id_edit_sched4_beginMn" maxlength="2" size="2" /> </th>
						<th> Hr: <input type="number" name="edit_sched4_endHr" value="23" min="0" max="23"
								id="id_edit_sched4_endHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched4_endMn" value="59" min="0" max="59"
								id="id_edit_sched4_endMn" maxlength="2" size="2" /> </th>
						<th> <input type="checkbox" name="sched4Day" checked> <label>Dim</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Lun</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Mar</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Mer</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Jeu</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Ven</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Sam</label> </th>
						<th> <input type="checkbox" name="sched4Day" unchecked> <label>Jour Ferie</label> </th>
					</tr>

					<tr>
						<th colspan="1" align="center">Plage 5</th>
						<th> Hr: <input type="number" name="edit_sched5_beginHr" value="00" min="0" max="23"
								id="id_edit_sched5_beginHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched5_beginMn" value="00" min="0" max="59"
								id="id_edit_sched5_beginMn" maxlength="2" size="2" /> </th>
						<th> Hr: <input type="number" name="edit_sched5_endHr" value="06" min="0" max="23"
								id="id_edit_sched5_endHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched5_endMn" value="00" min="0" max="59"
								id="id_edit_sched5_endMn" maxlength="2" size="2" /> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Dim</label> </th>
						<th> <input type="checkbox" name="sched5Day" checked> <label>Lun</label> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Mar</label> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Mer</label> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Jeu</label> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Ven</label> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Sam</label> </th>
						<th> <input type="checkbox" name="sched5Day" unchecked> <label>Jour Ferie</label> </th>
					</tr>
					<tr>
						<th colspan="1" align="center">Plage 6</th>
						<th> Hr: <input type="number" name="edit_sched6_beginHr" value="00" min="0" max="23"
								id="id_edit_sched6_beginHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched6_beginMn" value="00" min="0" max="59"
								id="id_edit_sched6_beginMn" maxlength="2" size="2" /> </th>
						<th> Hr: <input type="number" name="edit_sched6_endHr" value="00" min="0" max="23"
								id="id_edit_sched6_endHr" maxlength="2" size="2" /> </th>
						<th> Min: <input type="number" name="edit_sched6_endMn" value="00" min="0" max="59"
								id="id_edit_sched6_endMn" maxlength="2" size="2" /> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Dim</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Lun</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Mar</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Mer</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Jeu</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Ven</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Sam</label> </th>
						<th> <input type="checkbox" name="sched6Day" unchecked> <label>Jour Ferie</label> </th>
					</tr>

				</table>


			</div>
		</div>



		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">

				<h2>Code sites auxilliaires</h2>

				Nombre code sites aux: <input type="number" name="edit_codesiteAuxNb" value="00" min="0" max="4"
					id="id_edit_codesiteAuxNb" maxlength="2" size="2" />

				Code site Aux 1: <input type="number" name="edit_codesiteAux1" value="00000001" min="0" max="4294967295"
					id="id_edit_codesiteAux1" /> 
				Code site Aux 2: <input type="number" name="edit_codesiteAux2" value="00000000" min="0" max="4294967295"
					id="id_edit_codesiteAux2" /> 
				Code site Aux 3: <input type="number" name="edit_codesiteAux3" value="00000000" min="0" max="4294967295"
					id="id_edit_codesiteAux3" /> 
				Code site Aux 4: <input type="number" name="edit_codesiteAux4" value="00000000" min="0" max="4294967295"
					id="id_edit_codesiteAux4" /> 


			</div>
		</div>


		<div class="row d-flex justify-content-center align-items-center mt-5 mb-5">
			<div class="col text-center">

				<button type="button" class="btn btn-primary" onclick="libraTagEncode()"> Encoder badge </button>

				<button type="button" class="btn btn-primary" onclick="copyToClickBoard('allo')"> Test clipboard </button>

				<h2 id="myHeader">Contenu du badge a encoder</h2>
				<p style="color:blueviolet" id="id_tagData">Tag data</p>


				<button type="button" class="btn btn-danger" id="btn_prog_on"> Programmez ON</button>
				
				<p style="color: red;">Logs : <span id="logs"></span></p>

			</div>
		</div>








		<!--  **************   JAVASCRIPT     ************************-->

		
		<!--
		<script>


			$(function () {
				var socket = io.connect('http://localhost:3000');

				socket.on('message', function (message) {
					$('#logs').html(message);
				});

				/*
				$('#btn_prog_on').click(function () {
					socket.emit('message', 'TAG');
					console.log('programmé!')
				});
				*/
				$('#btn_prog_off').click(function () {
					socket.emit('message', 'OFF');
					console.log('programmé!')
				});

				$('#btn_prog_on').click(function () {
					var tagTransfert = $('#id_tagData').text();
					console.log('tagTransfet: ' + tagTransfert);

					socket.emit('message', tagTransfert.substring(0, 14));
				});

			});


			function copyToClickBoard(content) {
				//var content = document.getElementById('textArea').innerHTML;
				if (!navigator.clipboard) {
					// Clipboard API not available
					//return
					alert('probleme presse papier');
				}

				//alert(content);

				navigator.clipboard.writeText(content)
					.then(() => {
						console.log("Text copied to clipboard...")
					})
					.catch(err => {
						console.log('Something went wrong', err);
					})
			}

			function convertFromHex(hex) {
				var hex = hex.toString();//force conversion
				var str = '';
				for (var i = 0; i < hex.length; i += 2)
					str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
				return str;
			}

			function convertToHex(str) {
				var hex = '';
				for (var i = 0; i < str.length; i++) {
					hex += '' + str.charCodeAt(i).toString(16);
				}
				return hex;
			}

			function strToInt(str) {
				var int = 0;
				for (var i = 0; i < str.length; i++) {
					int += Math.pow(10, (str.length - 1 - i)) * (str.charCodeAt(i) - 0x30);
				}
				return int;
			}

			function intToHex(int) {
				return (int.toString(16));
			}

			function intToStrInt(int) {
				return (int.toString(10));
			}

			function strFillZeroBeginning(str, len) {
				var newStr = str;
				for (var i = str.length; i < len; i++) {
					newStr = '0' + newStr;
				}
				return newStr;
			}

			function strAsIntToHex(str, nbBytes) {
				return (strFillZeroBeginning(intToHex(strToInt(str)), (nbBytes * 2)));
			}

			function stringToHex(str, nbBytes) {
				return (strFillZeroBeginning(convertToHex(str), (nbBytes * 2)));
			}



			function idStringToHex(id, nbBytes) {
				var str = document.getElementById(id).value;
				var hex = stringToHex(str, nbBytes);
				return (hex);
			}

			function idIntToHex(id, nbBytes) {
				var str = document.getElementById(id).value;
				var hex = strAsIntToHex(str, nbBytes);
				return (hex);
			}

			function setValueFromId(id, value) {
				document.getElementById(id).value = value;
			}

			function getValueFromRadioName(name) {
				var ele = document.getElementsByName(name);
				var value;
				for (i = 0; i < ele.length; i++) {
					if (ele[i].checked)
						//document.getElementById("result").innerHTML
						//    = "Gender: "+ele[i].value;
						value = ele[i].value;
				}
				return (value);
			}

			function getMaskFromCheckboxName(name) {
				var ele = document.getElementsByName(name);
				var mask = 0;
				for (i = 0; i < ele.length; i++) {
					if (ele[i].checked)
						//document.getElementById("result").innerHTML
						//    = "Gender: "+ele[i].value;					
						//mask+= Math.pow( 2, i) * ele[i].value;
						mask += Math.pow(2, i);
				}

				var maskFilledZero = intToHex(mask);
				maskFilledZero = strFillZeroBeginning(maskFilledZero, 2);

				return (maskFilledZero);
			}

			function setMaskFromCheckboxName(name, mask_p) {
				var ele = document.getElementsByName(name);
				var mask = mask_p;

				for (i = 0; i < ele.length; i++) {
					//var reste = mask % 1;			
					//if ( (mask % 1) == 1)
					if ((mask & 1) == 1)
						ele[i].checked = true;
					else
						ele[i].checked = false;

					//mask = Math.floor(mask/2);
					mask >>= 1;
				}
			}

			///////////////////////////////////////////////////////////////////////////////////////////////
			function setClickHandlerFromRadioName(name, index, handler) {
				var ele = document.getElementsByName(name);

				ele[index].onclick = function () { if (ele[index].checked) handler(); }
				if (ele[index].checked) handler();


			}

			function typeBadgeMaitreClickHandler() {
				var ctrlSerial = document.getElementById("id_controllerSerial");
				var edit_codesite = document.getElementById("id_edit_codesite");
				//var items_badgeAvecFichier = document.getElementById("id_items_badgeAvecFichier");	

				//ctrlSerial.disabled = false;
				ctrlSerial.style.visibility = "visible";
				edit_codesite.style.visibility = "hidden";
				//items_badgeAvecFichier.style.visibility = "hidden"; 

			}

			function typeBadgeAvecFichierHandler() {
				var ctrlSerial = document.getElementById("id_controllerSerial");
				var edit_codesite = document.getElementById("id_edit_codesite");
				//ctrlSerial.disabled = true;		
				ctrlSerial.style.visibility = "hidden";
				edit_codesite.style.visibility = "visible";
			}

			function typeBadgeResident() {
				typeBadgeAvecFichierHandler();
				setMaskFromCheckboxName("sched1Day", 255);
				setValueFromId("id_edit_sched1_beginHr", 00);
				setValueFromId("id_edit_sched1_beginMn", 00);
				setValueFromId("id_edit_sched1_endHr", 23);
				setValueFromId("id_edit_sched1_endMn", 59);
			}

			function typeBadgePrestaire() {
				typeBadgeAvecFichierHandler();
				setMaskFromCheckboxName("sched1Day", 2 + 4 + 8 + 16 + 32);
				setValueFromId("id_edit_sched1_beginHr", 07);
				setValueFromId("id_edit_sched1_beginMn", 30);
				setValueFromId("id_edit_sched1_endHr", 12);
				setValueFromId("id_edit_sched1_endMn", 00);
			}

			//id_controllerSerial

			setClickHandlerFromRadioName("radio_typeBadge", 0, typeBadgeMaitreClickHandler);
			setClickHandlerFromRadioName("radio_typeBadge", 1, typeBadgeResident);
			setClickHandlerFromRadioName("radio_typeBadge", 2, typeBadgePrestaire);
			setClickHandlerFromRadioName("radio_typeBadge", 3, typeBadgeAvecFichierHandler);



			///////////////////////////////////////////////////////////////////////////////////////////////


			function libraTagEncode() {
				//hexString = yourNumber.toString(16);
				//yourNumber = parseInt(hexString, 16);
				//var nbr = 15;

				//var typeBadge = document.getElementById("id_radio_typeBadge").value;

				//var typeBadge = idToHex("id_radio_typeBadge", 1);

				var tagFile = '';
				tagFile += getValueFromRadioName("radio_typeBadge");
				tagFile += idIntToHex("id_edit_codesite", 4);
				//Champ FirstNameLastName supprime
				/*
				tagFile+=idStringToHex("id_edit_userLastName", 16);
				tagFile+=idStringToHex("id_edit_userFirstName", 16);
				*/
				tagFile += idIntToHex("id_edit_userId", 2);
				tagFile += idIntToHex("id_edit_userColor", 1);
				tagFile += idIntToHex("id_edit_userLostcounter", 1);

				tagFile += getMaskFromCheckboxName("doormaskP0");
				tagFile += getMaskFromCheckboxName("doormaskP1");
				tagFile += getMaskFromCheckboxName("doormaskP2");
				tagFile += getMaskFromCheckboxName("doormaskP3");
				tagFile += getMaskFromCheckboxName("doormaskP4");
				tagFile += getMaskFromCheckboxName("doormaskP5");
				tagFile += getMaskFromCheckboxName("doormaskP6");
				tagFile += getMaskFromCheckboxName("doormaskP7");


				//Debut validite
				tagFile += idIntToHex("id_edit_dateValidBeginDay", 1);
				tagFile += idIntToHex("id_edit_dateValidBeginMonth", 1);
				tagFile += idIntToHex("id_edit_dateValidBeginYear", 2);
				tagFile += idIntToHex("id_edit_heureValidBeginHr", 1);
				tagFile += idIntToHex("id_edit_heureValidBeginMn", 1);
				//Fin validite
				tagFile += idIntToHex("id_edit_dateValidEndDay", 1);
				tagFile += idIntToHex("id_edit_dateValidEndMonth", 1);
				tagFile += idIntToHex("id_edit_dateValidEndYear", 2);
				tagFile += idIntToHex("id_edit_heureValidEndHr", 1);
				tagFile += idIntToHex("id_edit_heureValidEndMn", 1);

				//Masque jours feriés
				tagFile += getMaskFromCheckboxName("edit_joursFeriesValid");

				//Tag validity sched1
				tagFile += idIntToHex("id_edit_sched1_beginHr", 1);
				tagFile += idIntToHex("id_edit_sched1_beginMn", 1);
				tagFile += idIntToHex("id_edit_sched1_endHr", 1);
				tagFile += idIntToHex("id_edit_sched1_endMn", 1);
				tagFile += getMaskFromCheckboxName("sched1Day");

				//Tag validity sched2
				tagFile += idIntToHex("id_edit_sched2_beginHr", 1);
				tagFile += idIntToHex("id_edit_sched2_beginMn", 1);
				tagFile += idIntToHex("id_edit_sched2_endHr", 1);
				tagFile += idIntToHex("id_edit_sched2_endMn", 1);
				tagFile += getMaskFromCheckboxName("sched2Day");

				//Tag validity sched3
				tagFile += idIntToHex("id_edit_sched3_beginHr", 1);
				tagFile += idIntToHex("id_edit_sched3_beginMn", 1);
				tagFile += idIntToHex("id_edit_sched3_endHr", 1);
				tagFile += idIntToHex("id_edit_sched3_endMn", 1);
				tagFile += getMaskFromCheckboxName("sched3Day");

				//Tag validity sched4
				tagFile += idIntToHex("id_edit_sched4_beginHr", 1);
				tagFile += idIntToHex("id_edit_sched4_beginMn", 1);
				tagFile += idIntToHex("id_edit_sched4_endHr", 1);
				tagFile += idIntToHex("id_edit_sched4_endMn", 1);
				tagFile += getMaskFromCheckboxName("sched4Day");

				//Tag validity sched5
				tagFile += idIntToHex("id_edit_sched5_beginHr", 1);
				tagFile += idIntToHex("id_edit_sched5_beginMn", 1);
				tagFile += idIntToHex("id_edit_sched5_endHr", 1);
				tagFile += idIntToHex("id_edit_sched5_endMn", 1);
				tagFile += getMaskFromCheckboxName("sched5Day");

				//Tag validity sched6
				tagFile += idIntToHex("id_edit_sched6_beginHr", 1);
				tagFile += idIntToHex("id_edit_sched6_beginMn", 1);
				tagFile += idIntToHex("id_edit_sched6_endHr", 1);
				tagFile += idIntToHex("id_edit_sched6_endMn", 1);
				tagFile += getMaskFromCheckboxName("sched6Day");


				tagFile += idIntToHex("id_edit_codesiteAuxNb", 1);
				if (document.getElementById("id_edit_codesiteAuxNb").value >= 1) tagFile += idIntToHex("id_edit_codesiteAux1", 4);
				if (document.getElementById("id_edit_codesiteAuxNb").value >= 2) tagFile += idIntToHex("id_edit_codesiteAux2", 4);
				if (document.getElementById("id_edit_codesiteAuxNb").value >= 3) tagFile += idIntToHex("id_edit_codesiteAux3", 4);
				if (document.getElementById("id_edit_codesiteAuxNb").value >= 4) tagFile += idIntToHex("id_edit_codesiteAux4", 4);

				tagFile += '';
				tagFile += '';


				//document.getElementById("id_tagData").innerHTML = tagFile;
				document.getElementById("id_tagData").innerHTML = tagFile;


				//alert('tagFile '+tagFile);
				//;Libra;cmd=write;length=05;data=0112345678;
				var encoderCommand = ";Libra;cmd=write;length=";
				var nbDigits = tagFile.length;
				//01 12345678 
				//000000000000000000004475706f6e74
				//0000000000000000000000004a65616e
				//04d2
				//00
				//00
				//03			
				//var tagFileNbBytes = intToHex(tagFile.length / 2);
				var tagFileNbBytes = intToStrInt(tagFile.length / 2);
				encoderCommand += tagFileNbBytes;
				encoderCommand += ";data=";
				encoderCommand += tagFile
				encoderCommand += ";";
				copyToClickBoard(encoderCommand)


			}

		</script>

		-->

	</container>

</body>

</html>